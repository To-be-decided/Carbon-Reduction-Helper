<!DOCTYPE html>
<html lang="en">
<head>
    <!--- Feature configuration -->
    <!-- for "standAloneMode" see common.css -->
    <style>
        .popularity {
            display: none
        }

        .costEffectiveness {
            display: none
        }
    </style>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">
    <meta name="theme-color" content="#000000">
    <!--<base href="/">-->
    <base href=".">

    <!-- @todo Next line causes warning in IDE
    <link rel="manifest" href="./lib/manifest.json"> -->

    <link  rel="shortcut icon" href="images/favicon.ico">
    <title>Carbon Reduction Helper - Plan</title>

    <!-- Common file includes -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-173546127-1"></script>
    <script src="lib/common.js"></script>
    <link rel="stylesheet" href="lib/common.css">
    <link rel="stylesheet" href="lib/2.67123b20.chunk.css">
    <link rel="stylesheet" href="lib/main.a391ff7c.chunk.css">

    <script src="../model.js"></script>
	<script src="view.js"></script>
    <script src="../controller.js"></script>

    <!-- Locals -->
    <style>
        /*noinspection CssUnusedSymbol*/
        .slideSource_fade {
            transition: background-color 0.2s;
            background-color: blue;
        }
    </style>

</head>

<!-------------------------------------------------------------->

<body data-gr-c-s-loaded="true">

<noscript>You need to enable JavaScript to run this app.</noscript>

<!--suppress ES6ConvertVarToLetConst -->
<script>
    var incLowImpactSteps = urlParams.get('incLowImpactSteps')

    function pulse(element, withStyle) {
        element.classList.toggle(withStyle);
        setTimeout(fadeIn, 200, element)
    }

    function fadeIn(element) {
        element.classList.toggle(element.classList[0])
    }

    function handle_select(){
        document.getElementById("FamiliariseButtonId").disabled = false
        document.getElementById("AdoptButtonId").disabled = false
    }

    function handle_familiariseButtonClick(){

        //*** Set the step in the url to the version selected
        step = document.querySelector('input[name="selStep"]:checked').value  // For gotoMenu()

        //*** Mark the step as adopting and save
        model_setStepStateId(step, "familiarising")

        //*** Goto the familiarise page
        gotoMenu("familiarise.html")
    }

    function handle_adoptButtonClick(){

        //*** Set the step in the url to the version selected
        step = document.querySelector('input[name="selStep"]:checked').value  // For gotoMenu()

        //*** Mark the step as adopting and save
        model_setStepStateId(step, "adopting")

        //*** Goto the familiarise page
        gotoMenu("complete.html")
    }
</script>

<!-------------------------------------------------------------->

<div id="root">
    <header>
        <nav class=" standAloneMode navbar-expand-sm navbar-toggleable-sm ng-white border-bottom box-shadow mb-3 navbar-light">
            <div class="container">
                <a class="navbar-brand" href="../index.html">Carbon Reduction Helper (proof-of-concept)</a>
                <br>
                <button aria-label="Toggle navigation" type="button" class="mr-2 navbar-toggler">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="d-sm-inline-flex flex-sm-row-reverse collapse navbar-collapse standAloneMode">
                    <ul class="navbar-nav flex-grow">
                        <li class="nav-item menu_dashboard">
                            <a class="text-dark nav-link" href="#" onclick="gotoMenu('dashboard.html');return false">Dashboard</a>
                        </li>
                        <li class="nav-item menu_select">
                            <a class="text-dark nav-link" disabled="" href="#" onclick="gotoMenu('plan.html');return false">[Select]</a>
                        </li>
                        <li class="nav-item menu_familiarise">
                            <a class="text-dark nav-link" href="#" onclick="gotoMenu('familiarise.html');return false">Familiarise</a>
                        </li>
                        <li class="nav-item menu_adopt">
                            <a class="text-dark nav-link" href="#" onclick="gotoMenu('complete.html');return false">Adopt</a>
                        </li>

                        <li class="nav-item menu_help">
                            <a class="text-dark nav-link" href="#" onclick="gotoMenu('help.html');return false">Help</a>
                        </li>
                    </ul>
                </div>
            </div> <!-- container -->
        </nav>
    </header>
    <div class="container-xl">
        <div class="row">
            <div id="statusAndOptions" style="width:300px">
                <br>
                <div id="resultsSummary">Calculating ...</div><br>
                <div id="filters">
                    Search by text contents &nbsp;&nbsp;&nbsp;
                    <input
                            id="searchField"
                            onchange="alert('Not implemented in this proof-of-concept.  Please use the browser\'s find facility')"
                            type="text"
                            value="e.g. electric"
                    ><br>
                    <br>
                    Filter by impact on person<br>
                        ___Net cost of <br><select>
                            <option>Any</option>
                            <option disabled>£0 to £5k</option>
                            <option disabled>£5k to £10k</option>
                            <option disabled>£10k and above</option>
                        </select>
                        <br>
                    <br>
                        ___Physical disruption <select>
                            <option>Any</option>
                            <option disabled>None</option>
                            <option disabled>None to Low</option>
                            <option disabled>Low to Medium</option>
                            <option disabled>Medium and above</option>
                        </select><br>
                        <br>
                        <br>
                        Filter by carbon reduction<br>
                            &nbsp;&nbsp;&nbsp;<input id="showStepsBelow5perc" onchange="refresh_steps()" type="checkbox">
                            Include steps with a reduction<br> of less than 5%<br>
                    <br>
                    </div>

                    <div class="advancedMode">
                        Filter by status<br>
                        &nbsp;&nbsp;&nbsp;<input checked disabled type="checkbox">Monitor<br>
                        &nbsp;&nbsp;&nbsp;<input checked disabled type="checkbox">Adopt<br>
                        &nbsp;&nbsp;&nbsp;<input checked disabled type="checkbox">Done <br>
                        &nbsp;&nbsp;&nbsp;<input checked disabled type="checkbox">Ignore<br>
                        <br>
                    </div>

                    Include information on<br>
                    &nbsp;&nbsp;&nbsp;<input checked disabled onchange="alert('Disabling is not implemented in this proof-of-concept'); this.value='All'"
                                             type="checkbox">Cost effectiveness<br>
                    <br>

            </div> <!-- Filters -->
            <div id="mainWindow"> <!-- tips and list of steps -->
                <br>
                <div class="standAloneMode">
                    <h5 style="font-style:italic" align="center">From the list below, select the next carbon reduction<br> step you are happy doing and click [Familiarise] or [Adopt]</h5>
                    <br>
                </div>
                <div class="infoOnlyMode">
                    <h5 style="font-style:italic" align="center">Look down the list of actions below and do the first you know you will complete.  Then repeat.</h5>
                    <p>Extensive information is available at "More info ..." under each reduction step.</p>
                    <br>
                </div>
                <form>
                    <table aria-labelledby="tableLabel" class="table table-striped table-hover">
                        <thead>
                        <tr>
                            <th style="vertical-align:top">Step Summary</th>
                            <th>Amount<img alt="Click to change sorting" src="images/sort_down.png"><br>
                                <small>(c.f. average<br>UK person)</small></th>
                            <th class="costEffectiveness" style="vertical-align:top">
                                <a
                                        href="plan.html"
                                        onClick='alert("Sorting on this column is not implemented in this proof-of-concept")'>Cost
                                    effect-iveness
                                </a>
                            </th>
                            <th class="standAloneMode" style="vertical-align:top">
                                <a href="plan.html"
                                   onClick='alert("Sorting on this column is not implemented in this proof-of-concept")'>I
                                    want to ...
                                </a>
                            </th>
                        </tr>
                        </thead>

                                        <tr>
                                        <tr>
                                            <td></td>
                                        </tr>
                                        <tr>
                                            <td>Replace an old gas boiler with an air source heat pump<br>
                                                <a href="familiarise.html?step=10">More ...</a></td>
                                            <td>23%</td>
                                            <td class="popularity">**---</td>
                                            <td class="costEffectiveness">??<br>%/£/yr</td>
                                            <td class="standAloneMode">
                                                <div class="advancedMode">
                                                    <select class="stateSelector form-control" id="step10"
                                                            onChange="handle_stepStateChange(10, this.value)"
                                                            style="width:150px">
                                                        <option value=""></option>
                                                        <option value="monitoring">Monitoring</option>
                                                        <option value="familiarising">Familiarising</option>
                                                        <option value="adopting">Adopting</option>
                                                        <option value="completed">Completed</option>
                                                        <option value="rejected">Rejected</option>
                                                    </select>
                                                </div>
                                                <div class="easyMode">
                                                    <input name="selStep"  type="radio" value="10" oninput="handle_select()">
                                                </div>
                                        </tr>
                                        <tr>
                                            <td>Replace an old gas boiler with a ground source heat pump<br>
                                                <a href="familiarise.html?step=20">More ...</a></td>
                                            <td>23%</td>
                                            <td class="popularity">**---</td>
                                            <td class="costEffectiveness">??<br>%/£/yr</td>
                                            <td class="standAloneMode">
                                                <div class="advancedMode">
                                                    <select class="stateSelector form-control" id="step20"
                                                            onChange="handle_stepStateChange(20, this.value)"
                                                            style="width:150px">
                                                        <option value=""></option>
                                                        <option value="monitoring">Monitoring</option>
                                                        <option value="familiarising">Familiarising</option>
                                                        <option value="adopting">Adopting</option>
                                                        <option value="completed">Completed</option>
                                                        <option value="rejected">Rejected</option>
                                                    </select>
                                                </div>
                                                <div class="easyMode">
                                                    <input name="selStep"  type="radio"  value="20" oninput="handle_select()">
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Replace 5 beef (herd) portions/week with poultry<br>
                                                <a href="familiarise.html?step=30">More ...</a>
                                            </td>
                                            <td>20%</td>
                                            <td class="popularity">**---</td>
                                            <td class="costEffectiveness">Max<br>%/£/yr</td>
                                            <td class="standAloneMode">
                                                <div class="advancedMode">
                                                    <select class="stateSelector form-control" id="step30"
                                                            onChange="handle_stepStateChange(30, this.value)"
                                                            style="width:150px">
                                                        <option value=""></option>
                                                        <option value="monitoring">Monitoring</option>
                                                        <option value="familiarising">Familiarising</option>
                                                        <option value="adopting">Adopting</option>
                                                        <option value="completed">Completed</option>
                                                        <option value="rejected">Rejected</option>
                                                    </select>
                                                </div>
                                                <div class="easyMode">
                                                    <input name="selStep"  type="radio" value="30" oninput="handle_select()">
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Replace a petrol car with a battery electric car<br>
                                                <a href="familiarise.html?step=40">More ...</a>
                                            </td>
                                            <td>17%</td>
                                            <td class="popularity">***--</td>
                                            <td class="costEffectiveness">??<br>%/£/yr</td>
                                            <td class="standAloneMode">
                                                <div class="advancedMode">
                                                    <select class="stateSelector form-control" id="step40"
                                                            onChange="handle_stepStateChange(40, this.value)"
                                                            style="width:150px">
                                                        <option value=""></option>
                                                        <option value="monitoring">Monitoring</option>
                                                        <option value="familiarising">Familiarising</option>
                                                        <option value="adopting">Adopting</option>
                                                        <option value="completed">Completed</option>
                                                        <option value="rejected">Rejected</option>
                                                    </select>
                                                </div>
                                                <div class="easyMode">
                                                    <input name="selStep"  type="radio" value="40" oninput="handle_select()">
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Increase loft insulation from ??cm to ??cm in a gas heated house with an
                                                old boiler<br>
                                                <a href="familiarise.html?step=50">More ...</a>
                                            </td>
                                            <td>17%</td>
                                            <td class="popularity">***--</td>
                                            <td class="costEffectiveness">??<br>%/£/yr</td>
                                            <td class="standAloneMode">
                                                <div class="advancedMode">
                                                    <select class="stateSelector form-control" id="step50"
                                                            onChange="handle_stepStateChange(50, this.value)"
                                                            style="width:150px">
                                                        <option value=""></option>
                                                        <option value="monitoring">Monitoring</option>
                                                        <option value="familiarising">Familiarising</option>
                                                        <option value="adopting">Adopting</option>
                                                        <option value="completed">Completed</option>
                                                        <option value="rejected">Rejected</option>
                                                    </select>
                                                </div>
                                                <div class="easyMode">
                                                    <input name="selStep"  type="radio" value="50" oninput="handle_select()">
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Switch from an old conventional gas boiler to a high efficiency
                                                condensing gas boiler<br>
                                                <a href="familiarise.html?step=60">More ..."</a></td>
                                            <td>9%</td>
                                            <td class="popularity">**---</td>
                                            <td class="costEffectiveness">??<br>%/£/yr</td>
                                            <td class="standAloneMode">
                                                <div class="advancedMode">
                                                    <select class="stateSelector form-control" id="step60"
                                                            onChange="handle_stepStateChange(60, this.value)"
                                                            style="width:150px">
                                                        <option value=""></option>
                                                        <option value="monitoring">Monitoring</option>
                                                        <option value="familiarising">Familiarising</option>
                                                        <option value="adopting">Adopting</option>
                                                        <option value="completed">Completed</option>
                                                        <option value="rejected">Rejected</option>
                                                    </select>
                                                </div>
                                                <div class="easyMode">
                                                    <input name="selStep"  type="radio" value="60" oninput="handle_select()">
                                                </div>
                                            </td>
                                        </tr>

                                        <tr>
                                            <td>Commute by walking rather than driving a petrol car</td>
                                            <td>8%</td>
                                            <td class="popularity">*----</td>
                                            <td class="costEffectiveness">??<br>%/£/yr</td>
                                            <td class="standAloneMode">
                                                <div class="advancedMode">
                                                    <select class="stateSelector form-control" id="step70"
                                                            onChange="handle_stepStateChange(70, this.value)"
                                                            style="width:150px">
                                                        <option value=""></option>
                                                        <option value="monitoring">Monitoring</option>
                                                        <option value="familiarising">Familiarising</option>
                                                        <option value="adopting">Adopting</option>
                                                        <option value="completed">Completed</option>
                                                        <option value="rejected">Rejected</option>
                                                    </select>
                                                </div>
                                                <div class="easyMode">
                                                    <input name="selStep"  type="radio" value="70" oninput="handle_select()">
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Replace 2 beef (herd) portions/week with poultry</td>
                                            <td>8%</td>
                                            <td class="popularity">**---</td>
                                            <td class="costEffectiveness">Max</td>
                                            <td class="standAloneMode">
                                                <div class="advancedMode">
                                                    <select class="stateSelector form-control" id="step80"
                                                            onChange="handle_stepStateChange(80, this.value)"
                                                            style="width:150px">
                                                        <option value=""></option>
                                                        <option value="monitoring">Monitoring</option>
                                                        <option value="familiarising">Familiarising</option>
                                                        <option value="adopting">Adopting</option>
                                                        <option value="completed">Completed</option>
                                                        <option value="rejected">Rejected</option>
                                                    </select>
                                                </div>
                                                <div class="easyMode">
                                                    <input name="selStep"  type="radio" value="80" oninput="handle_select()">
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Reduce home thermostat by 2 deg C in a house with an old gas central
                                                heating
                                            </td>
                                            <td>7%</td>
                                            <td class="popularity">**---</td>
                                            <td class="costEffectiveness">??<br>%/£/yr</td>
                                            <td class="standAloneMode">
                                                <div class="advancedMode">
                                                    <select class="stateSelector form-control" id="step90"
                                                            onChange="handle_stepStateChange(90, this.value)"
                                                            style="width:150px">
                                                        <option value=""></option>
                                                        <option value="monitoring">Monitoring</option>
                                                        <option value="familiarising">Familiarising</option>
                                                        <option value="adopting">Adopting</option>
                                                        <option value="completed">Completed</option>
                                                        <option value="rejected">Rejected</option>
                                                    </select>
                                                </div>
                                                <div class="easyMode">
                                                    <input name="selStep"  type="radio" value="90" oninput="handle_select()">
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Work 1 day/week at home rather than commuting via a petrol car</td>
                                            <td>5%</td>
                                            <td class="popularity">***--</td>
                                            <td class="costEffectiveness">??<br>%/£/yr</td>
                                            <td class="standAloneMode">
                                                <div class="advancedMode">
                                                    <select class="stateSelector form-control" id="step100"
                                                            onChange="handle_stepStateChange(100, this.value)"
                                                            style="width:150px">
                                                        <option value=""></option>
                                                        <option value="monitoring">Monitoring</option>
                                                        <option value="familiarising">Familiarising</option>
                                                        <option value="adopting">Adopting</option>
                                                        <option value="completed">Completed</option>
                                                        <option value="rejected">Rejected</option>
                                                    </select>
                                                </div>
                                                <div class="easyMode">
                                                    <input name="selStep"  type="radio" value="100" oninput="handle_select()">
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Drive rather than fly to holiday location 1,000 miles away</td>
                                            <td>0%</td>
                                            <td class="popularity">***--</td>
                                            <td class="costEffectiveness">??<br>%/£/yr</td>
                                            <td class="standAloneMode">
                                                <div class="advancedMode">
                                                    <select class="stateSelector form-control" id="step110"
                                                            onChange="handle_stepStateChange(110, this.value)"
                                                            style="width:150px">
                                                        <option value=""></option>
                                                        <option value="monitoring">Monitoring</option>
                                                        <option value="familiarising">Familiarising</option>
                                                        <option value="adopting">Adopting</option>
                                                        <option value="completed">Completed</option>
                                                        <option value="rejected">Rejected</option>
                                                    </select>
                                                </div>
                                                <div class="easyMode">
                                                    <input name="selStep"  type="radio" value="110" oninput="handle_select()">
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>One staycation per year rather than a 1,000 mile flight.</td>
                                            <td>5%</td>
                                            <td class="popularity">***--</td>
                                            <td class="costEffectiveness">??<br>%/£/yr</td>
                                            <td class="standAloneMode">
                                                <div class="advancedMode">
                                                    <select class="stateSelector form-control" id="step120"
                                                            onChange="handle_stepStateChange(120, this.value)"
                                                            style="width:150px">
                                                        <option value=""></option>
                                                        <option value="monitoring">Monitoring</option>
                                                        <option value="familiarising">Familiarising</option>
                                                        <option value="adopting">Adopting</option>
                                                        <option value="completed">Completed</option>
                                                        <option value="rejected">Rejected</option>
                                                    </select>
                                                </div>
                                                <div class="easyMode">
                                                    <input name="selStep"  type="radio" value="120" oninput="handle_select()">
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>Add wall insulation in a gas heated house with an old boiler<br>
                                                <a href="familiarise.html?step=125">More ...</a>
                                            </td>
                                            <td>4%</td>
                                            <td class="popularity">***--</td>
                                            <td class="costEffectiveness">??<br>%/£/yr</td>
                                            <td class="standAloneMode">
                                                <div class="advancedMode">
                                                    <select class="stateSelector form-control" id="step125"
                                                            onChange="handle_stepStateChange(125, this.value)"
                                                            style="width:150px">
                                                        <option value=""></option>
                                                        <option value="monitoring">Monitoring</option>
                                                        <option value="familiarising">Familiarising</option>
                                                        <option value="adopting">Adopting</option>
                                                        <option value="completed">Completed</option>
                                                        <option value="rejected">Rejected</option>
                                                    </select>
                                                </div>
                                                <div class="easyMode">
                                                    <input name="selStep"  type="radio" value="125" oninput="handle_select()">
                                                </div>
                                            </td>
                                        </tr>
                                        <tr class="below5perc">
                                            <td>Share a petrol car to work</td>
                                            <td>4%</td>
                                            <td class="popularity">**---</td>
                                            <td class="costEffectiveness">??<br>%/£/yr</td>
                                            <td class="standAloneMode">
                                                <div class="advancedMode">
                                                    <select class="stateSelector form-control" id="step130"
                                                            onChange="handle_stepStateChange(130, this.value)"
                                                            style="width:150px">
                                                        <option value=""></option>
                                                        <option value="monitoring">Monitoring</option>
                                                        <option value="familiarising">Familiarising</option>
                                                        <option value="adopting">Adopting</option>
                                                        <option value="completed">Completed</option>
                                                        <option value="rejected">Rejected</option>
                                                    </select>
                                                </div>
                                                <div class="easyMode">
                                                    <input name="selStep"  type="radio" value="130" oninput="handle_select()">
                                                </div>
                                            </td>
                                        </tr>
                                        <tr class="below5perc">
                                            <td>Install solar PV panels</td>
                                            <td>3%</td>
                                            <td class="popularity">***--</td>
                                            <td class="costEffectiveness">??<br>%/£/yr</td>
                                            <td class="standAloneMode">
                                                <div class="advancedMode">
                                                    <select class="stateSelector form-control" id="step140"
                                                            onChange="handle_stepStateChange(140, this.value)"
                                                            style="width:150px">
                                                        <option value=""></option>
                                                        <option value="monitoring">Monitoring</option>
                                                        <option value="familiarising">Familiarising</option>
                                                        <option value="adopting">Adopting</option>
                                                        <option value="completed">Completed</option>
                                                        <option value="rejected">Rejected</option>
                                                    </select>
                                                </div>
                                                <div class="easyMode">
                                                    <input name="selStep"  type="radio" value="140" oninput="handle_select()">
                                                </div>
                                            </td>
                                        </tr>
                                        <!--
                                        <tr class="below5perc">
                                            <td>Replace 8 pints/week with soymilk
                                            </td>
                                            <td>2.7%</td>
                                            <td  class="popularity">***--</td>
                                            <td class="costEffectiveness">??<br>%/£/yr</td>
                                            <td class="standAloneMode">
                                                <div class="advancedMode">
                                                    <select id="step140" class="stateSelector form-control" onChange="handle_stepStateChange(150, this.value)" style="width:150px">
                                                        <option value=""></option>
                                                        <option value="monitoring">Monitoring</option>
                                                        <option value="familiarising">Familiarising</option>
                                                        <option value="adopting">Adopting</option>
                                                        <option value="completed">Completed</option>
                                                        <option value="rejected">Rejected</option>
                                                    </select>
                                                </div>
                                                <div class="easyMode">
                                                    <input name="selStep"  type="radio" value="150" oninput="handle_select()">
                                                </div>
                                            </td>
                                        </tr>
                                        -->
                                        <tr class="below5perc">
                                            <td>Switch to a car with 10% better mpg</td>
                                            <td>2%</td>
                                            <td class="popularity">xx**---</td>
                                            <td class="costEffectiveness">??<br>%/£/yr</td>
                                            <td class="standAloneMode">
                                                <div class="advancedMode">
                                                    <select class="stateSelector form-control" id="step150"
                                                            onChange="handle_stepStateChange(150, this.value)"
                                                            style="width:150px">
                                                        <option value=""></option>
                                                        <option value="monitoring">Monitoring</option>
                                                        <option value="familiarising">Familiarising</option>
                                                        <option value="adopting">Adopting</option>
                                                        <option value="completed">Completed</option>
                                                        <option value="rejected">Rejected</option>
                                                    </select>
                                                </div>
                                                <div class="easyMode">
                                                    <input name="selStep"  type="radio" value="160" oninput="handle_select()">
                                                </div>
                                            </td>
                                        </tr>
                                        <tr class="below5perc">
                                            <td>Switch to commuting by bus rather than a petrol car</td>
                                            <td>2%</td>
                                            <td class="popularity">*----</td>
                                            <td class="costEffectiveness">??<br>%/£/yr</td>
                                            <td class="standAloneMode">
                                                <div class="advancedMode">
                                                    <select class="stateSelector form-control" id="step170"
                                                            onChange="handle_stepStateChange(170, this.value)"
                                                            style="width:150px">
                                                        <option value=""></option>
                                                        <option value="monitoring">Monitoring</option>
                                                        <option value="familiarising">Familiarising</option>
                                                        <option value="adopting">Adopting</option>
                                                        <option value="completed">Completed</option>
                                                        <option value="rejected">Rejected</option>
                                                    </select>
                                                </div>
                                                <div class="easyMode">
                                                    <input name="selStep"  type="radio" value="170" oninput="handle_select()">
                                                </div>
                                            </td>
                                        </tr>
                                        <tr class="below5perc">
                                            <td>Use a train rather than drive on some long trips</td>
                                            <td>1.6%</td>
                                            <td class="popularity">*----</td>
                                            <td class="costEffectiveness">??<br>%/£/yr</td>
                                            <td class="standAloneMode">
                                                <div class="advancedMode">
                                                    <select class="stateSelector form-control" id="step180"
                                                            onChange="handle_stepStateChange(180, this.value)"
                                                            style="width:150px">
                                                        <option value=""></option>
                                                        <option value="monitoring">Monitoring</option>
                                                        <option value="familiarising">Familiarising</option>
                                                        <option value="adopting">Adopting</option>
                                                        <option value="completed">Completed</option>
                                                        <option value="rejected">Rejected</option>
                                                    </select>
                                                </div>
                                                <div class="easyMode">
                                                    <input name="selStep"  type="radio" value="180" oninput="handle_select()">
                                                </div>
                                            </td>
                                        </tr>
                                        <tr class="below5perc">
                                            <td>Install a solar immersion heater diverter feeding a electric hot water
                                                tank
                                            </td>
                                            <td>1.0%</td>
                                            <td class="popularity">**---</td>
                                            <td class="costEffectiveness">??<br>%/£/yr</td>
                                            <td class="standAloneMode">
                                                <div class="advancedMode">
                                                    <select class="stateSelector form-control" id="step190"
                                                            onChange="handle_stepStateChange(190, this.value)"
                                                            style="width:150px">
                                                        <option value=""></option>
                                                        <option value="monitoring">Monitoring</option>
                                                        <option value="familiarising">Familiarising</option>
                                                        <option value="adopting">Adopting</option>
                                                        <option value="completed">Completed</option>
                                                        <option value="rejected">Rejected</option>
                                                    </select>
                                                </div>
                                                <div class="easyMode">
                                                    <input name="selStep"  type="radio" value="190" oninput="handle_select()">
                                                </div>
                                            </td>
                                        </tr>
                                        <tr class="below5perc">
                                            <td>Install solar thermal panels with an electric powered hot water system
                                            </td>
                                            <td>1.0%</td>
                                            <td class="popularity">**---</td>
                                            <td class="costEffectiveness">??<br>%/£/yr</td>
                                            <td class="standAloneMode">
                                                <div class="advancedMode">
                                                    <select class="stateSelector form-control" id="step200"
                                                            onChange="handle_stepStateChange(200, this.value)"
                                                            style="width:150px">
                                                        <option value=""></option>
                                                        <option value="monitoring">Monitoring</option>
                                                        <option value="familiarising">Familiarising</option>
                                                        <option value="adopting">Adopting</option>
                                                        <option value="completed">Completed</option>
                                                        <option value="rejected">Rejected</option>
                                                    </select>
                                                </div>
                                                <div class="easyMode">
                                                    <input name="selStep"  type="radio" value="200" oninput="handle_select()">
                                                </div>
                                            </td>
                                        </tr>
                                        <tr class="below5perc">
                                            <td>Fill a dishwasher rather than using a half load</td>
                                            <td>0.9%</td>
                                            <td class="popularity">**---</td>
                                            <td class="costEffectiveness">??<br>%/£/yr</td>
                                            <td class="standAloneMode">
                                                <div class="advancedMode">
                                                    <select class="stateSelector form-control" id="step210"
                                                            onChange="handle_stepStateChange(210, this.value)"
                                                            style="width:150px">
                                                        <option value=""></option>
                                                        <option value="monitoring">Monitoring</option>
                                                        <option value="familiarising">Familiarising</option>
                                                        <option value="adopting">Adopting</option>
                                                        <option value="completed">Completed</option>
                                                        <option value="rejected">Rejected</option>
                                                    </select>
                                                </div>
                                                <div class="easyMode">
                                                    <input name="selStep"  type="radio" value="210" oninput="handle_select()">
                                                </div>
                                            </td>
                                        </tr>
                                        <tr class="below5perc">
                                            <td>Reduce your standby power by 50w</td>
                                            <td>0.8%</td>
                                            <td class="popularity">**---</td>
                                            <td class="costEffectiveness">??<br>%/£/yr</td>
                                            <td class="standAloneMode">
                                                <div class="advancedMode">
                                                    <select class="stateSelector form-control" id="step220"
                                                            onChange="handle_stepStateChange(220, this.value)"
                                                            style="width:150px">
                                                        <option value=""></option>
                                                        <option value="monitoring">Monitoring</option>
                                                        <option value="familiarising">Familiarising</option>
                                                        <option value="adopting">Adopting</option>
                                                        <option value="completed">Completed</option>
                                                        <option value="rejected">Rejected</option>
                                                    </select>
                                                </div>
                                                <div class="easyMode">
                                                    <input name="selStep"  type="radio" value="220" oninput="handle_select()">
                                                </div>
                                            </td>
                                        </tr>
                                        <tr class="below5perc">
                                            <td>Replace vented or condensing tumble dryer with heat pump model</td>
                                            <td>0.7%</td>
                                            <td class="popularity">**---</td>
                                            <td class="costEffectiveness">??<br>%/£/yr</td>
                                            <td class="standAloneMode">
                                                <div class="advancedMode">
                                                    <select class="stateSelector form-control" id="step230"
                                                            onChange="handle_stepStateChange(230, this.value)"
                                                            style="width:150px">
                                                        <option value=""></option>
                                                        <option value="monitoring">Monitoring</option>
                                                        <option value="familiarising">Familiarising</option>
                                                        <option value="adopting">Adopting</option>
                                                        <option value="completed">Completed</option>
                                                        <option value="rejected">Rejected</option>
                                                    </select>
                                                </div>
                                                <div class="easyMode">
                                                    <input name="selStep"  type="radio" value="230" oninput="handle_select()">
                                                </div>
                                            </td>
                                        </tr>
                                        <tr class="below5perc">
                                            <td>Switch to a start-stop car with same MPG</td>
                                            <td>0.6%</td>
                                            <td class="popularity">*----</td>
                                            <td class="costEffectiveness">??<br>%/£/yr</td>
                                            <td class="standAloneMode">
                                                <div class="advancedMode">
                                                    <select class="stateSelector form-control" id="step240"
                                                            onChange="handle_stepStateChange(240, this.value)"
                                                            style="width:150px">
                                                        <option value=""></option>
                                                        <option value="monitoring">Monitoring</option>
                                                        <option value="familiarising">Familiarising</option>
                                                        <option value="adopting">Adopting</option>
                                                        <option value="completed">Completed</option>
                                                        <option value="rejected">Rejected</option>
                                                    </select>
                                                </div>
                                                <div class="easyMode">
                                                    <input name="selStep"  type="radio" value="240" oninput="handle_select()">
                                                </div>
                                            </td>
                                        </tr>
                                        <tr class="below5perc">
                                            <td>Reduce maximum speed on motorway from 70 to 65 mph</td>
                                            <td>0.6%</td>
                                            <td class="popularity">**---</td>
                                            <td class="costEffectiveness">Max<br>%/£/yr</td>
                                            <td class="standAloneMode">
                                                <div class="advancedMode">
                                                    <select class="stateSelector form-control" id="step250"
                                                            onChange="handle_stepStateChange(250, this.value)"
                                                            style="width:150px">
                                                        <option value=""></option>
                                                        <option value="monitoring">Monitoring</option>
                                                        <option value="familiarising">Familiarising</option>
                                                        <option value="adopting">Adopting</option>
                                                        <option value="completed">Completed</option>
                                                        <option value="rejected">Rejected</option>
                                                    </select>
                                                </div>
                                                <div class="easyMode">
                                                    <input name="selStep"  type="radio" value="250" oninput="handle_select()">
                                                </div>
                                            </td>
                                        </tr>
                                        <tr class="below5perc">
                                            <td>Convert 5 x 60w incandescent light bulbs to LED</td>
                                            <td>0.6%</td>
                                            <td class="popularity">**---</td>
                                            <td class="costEffectiveness">Max<br>%/£/yr</td>
                                            <td class="standAloneMode">
                                                <div class="advancedMode">
                                                    <select class="stateSelector form-control" id="step260"
                                                            onChange="handle_stepStateChange(260, this.value)"
                                                            style="width:150px">
                                                        <option value=""></option>
                                                        <option value="monitoring">Monitoring</option>
                                                        <option value="familiarising">Familiarising</option>
                                                        <option value="adopting">Adopting</option>
                                                        <option value="completed">Completed</option>
                                                        <option value="rejected">Rejected</option>
                                                    </select>
                                                </div>
                                                <div class="easyMode">
                                                    <input name="selStep"  type="radio" value="260" oninput="handle_select()">
                                                </div>
                                            </td>
                                        </tr>
                                        <tr class="below5perc">
                                            <td>Dry clothes on washing line rather than tumble dryer</td>
                                            <td>0.2%</td>
                                            <td class="popularity">**---</td>
                                            <td class="costEffectiveness">Max<br>%/£/yr</td>
                                            <td class="standAloneMode">
                                                <div class="advancedMode">
                                                    <select class="stateSelector form-control" id="step270"
                                                            onChange="handle_stepStateChange(270, this.value)"
                                                            style="width:150px">
                                                        <option value=""></option>
                                                        <option value="monitoring">Monitoring</option>
                                                        <option value="familiarising">Familiarising</option>
                                                        <option value="adopting">Adopting</option>
                                                        <option value="completed">Completed</option>
                                                        <option value="rejected">Rejected</option>
                                                    </select>
                                                </div>
                                                <div class="easyMode">
                                                    <input name="selStep"  type="radio" value="270" oninput="handle_select()">
                                                </div>
                                            </td>
                                        </tr>
                                    </table> <!-- table-striped -->
                </form>
            </div> <!-- tips and list of steps -->
            <div id="contextMenu" class="standAloneMode"  style="width:250px"> <!-- Cards container -->
                <div class="sticky-top pt-2">
                    <!-- Comparison of emissions -->
                    <div class="card advancedMode">
                        <div class="card-header">
                            <h4>Your carbon reduction</h4>
                            <small>(compared to an average UK adult)</small>
                        </div> <!-- Card-header -->
                        <div class="card-body">
                            <b>Planned :</b> <b id="savedPlanned">Calculating ...</b><br>
                                <b>Completed :</b> <b id="savedDone">Calculating ...</b>
                        </div>
                        <div id="feedback" width="100%"></div>
                    </div>
                    <!-- Menu -->
                    <div class="card easyMode">
                        <div class="card-header">
                            <h4>Menu</h4>
                        </div>
                        <div class="card-body">
                            <input
                                    id="FamiliariseButtonId"
                                    type="button"
                                    value="Familiarise now"
                                    class = "quickMenuButton"
                                    disabled
                                    onclick="handle_familiariseButtonClick()"
                            >
                            <input
                                    id="AdoptButtonId"
                                    type="button"
                                    value="Adopt now"
                                    class = "quickMenuButton"
                                    disabled
                                    onclick="handle_adoptButtonClick()"
                            >
                        </div>
                    </div> <!-- Car 2 - body -->

                </div> <!-- Card 2 -->
            </div> <!-- Context menu -->
        </div>
    </div> <!-- container-xl -->
</div> <!-- Root -->

<!-------------------------------------------------------------->

<script>

    handle_stepStateChange = function (stepId, stateId) {

        controller_handle_stepStateChange(stepId, stateId);
        refresh_totals();
    }

    refresh_stepStates = function () {
        let stepStateSelectors = document.getElementsByClassName('stateSelector');

        Array.prototype.filter.call(
            stepStateSelectors,
            function (s) {
                let stepId = s.id.substring("step".length, 999)
                s.value = model_getStepStateId(stepId);
            }
        );

    }

    refresh_totals = function () {
        let savings = yourSavings()

        //*** Update done values ***
        let savedDonePerc = Math.round(savings.completed)
        let savedDoneNewPercText = savedDonePerc + "%"

        let savedDonePercId = document.getElementById("savedDone")
        if (savedDoneNewPercText !== savedDonePercId.innerText) {
            savedDonePercId.innerText = savedDoneNewPercText
            pulse(savedDonePercId, "slideSource_fade")
        }

        //*** Update planned values ***
        let savedPlannedPerc = Math.round(savings.planned)
        let savedPlannedNewPercText = savedPlannedPerc + "%"

        let savedPlannedPercId = document.getElementById("savedPlanned")
        if (savedPlannedNewPercText !== savedPlannedPercId.innerText) {
            savedPlannedPercId.innerText = savedPlannedNewPercText
            pulse(savedPlannedPercId, 'slideSource_fade')
        }

        //*** Update feedback ***

        let feedbackId = document.getElementById("feedback");
        if (savedDonePercId > savedDoneThresholdPerc) {
            feedbackId.innerText = "Well done you have achieved more than 20% savings.<br>Keep up the good work!";
        } else {
            feedbackId.innerText = ""
        }
    }

    refresh_steps = function () {
        let showStepsBelow5percId = document.getElementById('showStepsBelow5perc')
        let stepsBelow5perc = document.getElementsByClassName('below5perc');

        if (incLowImpactSteps != null) {
            incLowImpactSteps = null
            showStepsBelow5percId.checked = true
        }

        if (showStepsBelow5percId.checked) {
            Array.prototype.filter.call(
                stepsBelow5perc,
                function (e) {
                    e.style = "";
                }
            );
            document.getElementById('resultsSummary').innerHTML = "26 out of 26 steps"
        } else {
            Array.prototype.filter.call(
                stepsBelow5perc,
                function (e) {
                    e.style = "display:none";
                }
            );
            document.getElementById('resultsSummary').innerHTML = "12 out of 26 steps"
        }
    }

    controller_init()

    refresh_stepStates();
    refresh_totals();
    refresh_steps();

</script>

</body>
</html>