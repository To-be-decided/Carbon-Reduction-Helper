<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <script src="model.js"></script>
</head>
<body>

<script>
    console.log("Starting tests")

    model_init()

    let editUrl_20 = model_getStepEditUrl("20")
    if(editUrl_20 === "https://docs.google.com/document/d/10JEDaNkGi-s6BOkuW99qzfYAtC_mZnSyET0AGJl9CSE/edit#"){
        console.log("getEditURL: Passed")
    }else{
        console.log("getEditURL: Failed (returned " + editUrl_20 + ")")
    }

    // Save a value locally
    model_setStepStateId("20", "test")
    model_setStepStateId("30", "test")

    // Retrieve and check
    let localStepStateId_20 = model_getStepStateId("20")
    if(localStepStateId_20 === "test"){
        console.log("setStepState: Passed")
    }else{
        console.log("setStepState: Failed (returned " + localStepStateId_20 + ")")
    }

    // Reset local values
    loadValues()

    // Retrieve and check
    let savedStepStateId_20 = model_getStepStateId("20")
    if(savedStepStateId_20 === "test"){
        console.log("Saving State : Passed")
    }else{
        console.log("Saving State: Failed (returned " + savedStepStateId_20 + ")")
    }

//*** Test find_stepsByStateId ***
    completedSteps = find_stepsByStateId("test")
    if(
        completedSteps.length === 2 &&
        completedSteps[0].stepId === 20 &&
        completedSteps[1].stepId === 30
    ){
        console.log("find_stepsByStateId: Passed")
    }else{
        console.log("find_stepsByStateId: Failed")
        console.log("   completedSteps.length = " + completedSteps.length)
        completedSteps.forEach(
            step => console.log("   " + step.stepId)
        )
    }

    console.log("Testing finding steps by non-existent stateId ...")
    notExistSteps = find_stepsByStateId("notExist")
    notExistSteps.forEach(
        step => console.log(step.stepId)
    )

</script>

</body>
</html>